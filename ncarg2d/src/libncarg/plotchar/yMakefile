#
#	$Id: yMakefile,v 1.5 1992-11-17 18:47:32 kennison Exp $
#
NCARG	= ../../../..

MYNAME	= plotchar

GENERIC_SRCS = \
	plchhq.f plchmq.f plchlq.f pcgetc.f pcgeti.f pcgetr.f pcsetc.f \
	pcseti.f pcsetr.f pccchk.f pccffc.f pcdchk.f pcexcd.f pcgptr.f \
	pcgtdi.f pcgtpi.f pcmqlq.f pcsort.f pcblda.f bzbkd.f  \
	bzcurv.f bzdp2l.f bzfcrv.f bzftol.f bzgeti.f bzgetr.f bzseti.f \
	bzsetr.f bzsubd.f pcbdff.f pccfff.f pcffgd.f pcffgp.f pcffhl.f \
	pcffme.f pcgneg.f tdblda.f tdgeti.f tdgetr.f tdinit.f tdpara.f \
	tdprpa.f tdprpi.f tdprpt.f tdseti.f tdsetr.f pcmpxy.f

GENERIC_OBJS = \
	plchhq.o plchmq.o plchlq.o pcgetc.o pcgeti.o pcgetr.o pcsetc.o \
	pcseti.o pcsetr.o pccchk.o pccffc.o pcdchk.o pcexcd.o pcgptr.o \
	pcgtdi.o pcgtpi.o pcmqlq.o pcsort.o pcblda.o bzbkd.o  \
	bzcurv.o bzdp2l.o bzfcrv.o bzftol.o bzgeti.o bzgetr.o bzseti.o \
	bzsetr.o bzsubd.o pcbdff.o pccfff.o pcffgd.o pcffgp.o pcffhl.o \
	pcffme.o pcgneg.o tdblda.o tdgeti.o tdgetr.o tdinit.o tdpara.o \
	tdprpa.o tdprpi.o tdprpt.o tdseti.o tdsetr.o pcmpxy.o

OTHER_SRCS = pcfcls.f pcfopn.f pcfred.f bofred.c pcbnrd.c

OTHER_OBJS = pcfcls.o pcfopn.o pcfred.o bofred.o pcbnrd.o

SOURCES = $(GENERIC_SRCS) $(OTHER_SRCS)

OBJECTS = $(GENERIC_OBJS) $(OTHER_OBJS)

FCPP_OBJS       = pcfopn.f

PartialLibrary(libncarg.a,$(OBJECTS))

pcfopn.F: pcfopn.F.sed Makefile
	@sed \
	-e 's+SED_DBDIR+$(DBDIR)+' \
	<pcfopn.F.sed >pcfopn.F

#if defined(sgi) || defined(ardent) || (defined(u370) && defined(unix)) \
	|| defined(RS6000) || defined(hpux) || defined(cray) || defined(CRAY2)

.SUFFIXES: .F

.F.o:
	@$(FCPP) $< $*.f
	$(F77) $(FFLAGS) -c $*.f
	@$(RM) $*.f
#endif

#if defined(apollo)
# plchmq.f suffers from highest level of optimization. So use -opt 2.
plchmq.o:  plchmq.f
	$(F77) $(FFLAGS) -W0,-opt,2 -c plchmq.f
#endif

clean::
	@-$(RM) pcfopn.f

#ifdef  BuildNCARGSourceLibrary
all:: $(SOURCES)
	@echo "$(SOURCES)" > $(MYNAME)
	@$(AR_SRC_QUICK) $(LIBPATH)/srcncarg.a $(MYNAME) $(SOURCES)
	@-$(RM) $(MYNAME)

install:: $(SOURCES)
	@echo "$(SOURCES)" > $(MYNAME)
	@$(AR_SRC_CHECK) $(LIBPATH)/srcncarg.a $(MYNAME) $(SOURCES)
	$(RANLIB) $(LIBPATH)/srcncarg.a
	@-$(RM) $(MYNAME)

FRule
#endif

bofred.c:  bofred.c.sed Makefile
	@$(CALLCONV) $(SYSTEM_INCLUDE) bofred.c bofred

clean::
	@-$(RM) $(FCPP_OBJS) bofred.c
