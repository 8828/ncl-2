#	$Id: yMakefile,v 1.9 1991-11-15 17:07:42 don Exp $
#
#	Makefile for libraster - libraries for dealing with
#	a variety of raster image formats.
#
#define BuildXlibDependentCode

#define	BuildRasterHDF
#define	BuildRasterHPLaser
#define	BuildRasterNrif
#define	BuildRasterSun
#define BuildRasterAVS

#ifdef	BuildXlibDependentCode
#define	BuildRasterXWD
#endif	BuildXlibDependentCode

NCARG		= ../../../..
LOCINCDIR	= ../../include
MYNAME		= libncarg_ras.a
INCLUDES	= ncarg_ras.h

#ifdef BuildRasterHDF
HDF_OBJS =	hdf.o
HDF_SRCS =	hdf.c
HDF_DEFS = 	-DBuildRasterHDF
#endif

#ifdef BuildRasterHPLaser
HPLJ_OBJS =	hplj.o
HPLJ_SRCS =	hplj.c
HPLJ_DEFS =	-DBuildRasterHPLaser
#endif

#ifdef BuildRasterNrif
NRIF_OBJS =	nrif.o
NRIF_SRCS =	nrif.c
NRIF_DEFS = 	-DBuildRasterNrif
#endif

#ifdef BuildRasterSun
SUN_OBJS =	sunraster.o
SUN_SRCS =	sunraster.c
SUN_DEFS = 	-DBuildRasterSun
#endif

#ifdef BuildRasterXWD
XWD_OBJS =	xwd.o
XWD_SRCS =	xwd.c
XWD_DEFS = 	-DBuildRasterXWD
#endif

#ifdef BuildRasterParallax
PARALLAX_OBJS =	parallax.o
PARALLAX_SRCS =	parallax.c
PARALLAX_DEFS =	-DBuildRasterParallax
#endif

#ifdef BuildRasterAVS
AVS_OBJS =	avsraster.o
AVS_SRCS =	avsraster.c
AVS_DEFS =	-DBuildRasterAVS
#endif

CDEFINES =	-I$(LOCINCDIR) \
		$(HDF_DEFS) $(HPLJ_DEFS) $(NRIF_DEFS) $(SUN_DEFS) \
		$(XWD_DEFS) $(PARALLAX_DEFS) $(AVS_DEFS)

DEVICE_OBJS =	$(HDF_OBJS) $(HPLJ_OBJS) $(NRIF_OBJS) $(SUN_OBJS) \
		$(XWD_OBJS) $(PARALLAX_OBJS) $(AVS_OBJS)

DEVICE_SRCS =	$(HDF_SRCS) $(HPLJ_SRCS) $(NRIF_SRCS) $(SUN_SRCS) \
		$(XWD_SRCS) $(PARALLAX_SRCS) $(AVS_SRCS)

GENERIC_OBJS =	raster.o cleartext.o error.o misc.o palette.o dither.o \
		$(DEVICE_OBJS)

GENERIC_SRCS =	raster.c cleartext.c error.c misc.c palette.c dither.c \
		$(DEVICE_SRCS)
			
#ifdef CRAY
OTHER_OBJS	= bsd-sysv.o
OTHER_SRCS	= bsd-sysv.c
#endif

OBJS		= $(GENERIC_OBJS) $(OTHER_OBJS)
SRCS		= $(GENERIC_SRCS) $(OTHER_SRCS)

EQUALHACK	= =

Library($(MYNAME),$(OBJS))

dither.o:	ncarg_ras.h
error.o:	ncarg_ras.h
hdf.o:          ncarg_ras.h options.h Makefile
	$(CC) $(CFLAGS) -DTMPDIR$(EQUALHACK)'"$(TMPDIR)"' -c $*.c

misc.o:		ncarg_ras.h
nrif.o:		ncarg_ras.h nrif.h
palette.o:	ncarg_ras.h
rasinfo.o:	ncarg_ras.h
raster.o:	ncarg_ras.h options.h devices.h
sunraster.o:	ncarg_ras.h sunraster.h
xwd.o:		ncarg_ras.h
parallax.o:	ncarg_ras.h parallax.h
hplj.o:		ncarg_ras.h hplj.h
cleartext.o:	ncarg_ras.h
avsraster.o:	ncarg_ras.h avsraster.h

saber_src: $(SRCS)
	#load $(SRCS) -ldf

saber_obj: $(OBJS)
	#load $(OBJS) -ldf

rasinfo: rasinfo.o
	$(CC) $(CFLAGS) -o rasinfo rasinfo.o -lncarg_ras -ldf

install::
	@$(INSTALL) $(INCLUDES) $(LOCINCDIR)

lint:
	lint -I$(LOCINCDIR) $(SRCS) 1> lint.out 2>&1
