#
#
#	$Id: yMakefile,v 1.8 1992-02-13 18:36:51 clyne Exp $
#
#
#	Makefile for idt -- Interactive Image Display Tool
#
#

NCARG = ../../../..
BINDIR_LOCAL = ../../../bin

MYNAME	= idt

LOCLIBDIR	= ../../../lib
LOCINCDIR	= ../../include

TRANSLATOR	= ictrans

#
#	default path to x app defaults directory (only used if params file
#	not found)
#
XAPPDIR_DEFAULT	= /usr/lib/X11/app-defaults
#
#	default path to ictrans (only used if params file not found)
#
BINDIR_DEFAULT	= $(BINDIR)

#ifdef  sgi
CDEFINES	= -I$(LOCINCDIR) -I/usr/include/bsd
#else
#ifdef	sun
CDEFINES	= -I$(LOCINCDIR) -Bstatic
#else
CDEFINES	= -I$(LOCINCDIR)
#endif
#endif

#if defined(CRAY)
XLIBS	= \
	-lXaw -lXmu -lXt -lXext -lX11 -lnet
#else
#if defined(sgi)
XLIBS	= \
	-lXaw -lXmu -lXt -lXext -lX11 -lbsd
#else
XLIBS	= \
	-lXaw -lXmu -lXt -lXext -lX11
#endif
#endif


LOCLIB	= \
	$(LIBDIR)/libcgm.a $(LIBDIR)/libncarv.a


LIBS	= $(LOCLIB) $(XLIBS)


GENLIBS = -lm


EQUALHACK = =

OBJS	= \
	w_idt.o w_file.o file.o glob.o w_display.o display.o w_dialog.o \
	commands.o talkto.o xrubber.o scroll.o w_text.o spooler.o w_icon.o \
	xt_env.o kludge.o

SRCS	= \
	w_idt.c w_file.c file.c glob.c w_display.c display.c w_dialog.c \
	commands.c talkto.c xrubber.c scroll.c w_text.c spooler.c w_icon.c \
	xt_env.c kludge.c


all::	$(MYNAME)

CBinTarget($(MYNAME),$(OBJS),$(LIBS))
MakefileTarget
CleanTarget


#
#	w_idt.c needs to know the name of the translator
#
w_idt.o:     Makefile
	$(CC) $(CFLAGS) -DTRANSLATOR$(EQUALHACK)'"$(TRANSLATOR)"' \
	-DBINDIR_DEFAULT$(EQUALHACK)'"$(BINDIR_DEFAULT)"' -c $*.c

#
#	xt_env.c needs to know the default location of the idt resoure file
#
xt_env.o:     Makefile
	$(CC) $(CFLAGS) -DXAPPDIR_DEFAULT$(EQUALHACK)'"$(XAPPDIR_DEFAULT)"' \
								-c $*.c

lint:	$(HDR) $(SRCS)
	lint  -I$(LOCINCDIR) -DTRANSLATOR$(EQUALHACK)'"$(TRANSLATOR)"' \
		-DBINDIR_DEFAULT$(EQUALHACK)'"$(BINDIR_DEFAULT)"' \
		-DXAPPDIR_DEFAULT$(EQUALHACK)'"$(XAPPDIR_DEFAULT)"' \
		$(LINTLIBS) $(SRCS)  1> lint.out 2>&1
